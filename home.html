<!DOCTYPE html>
<html lang="en">
<head>
  <title>Desarrollo Agil: Log in</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
 
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="css/style.css"/>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="js/validation.js"></script>
</head>
<body>

	<nav class="navbar navbar-inverse">
	  <div class="container-fluid">
		<div class="navbar-header">
		  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
		  </button>
		  <a class="navbar-brand" href="#">Welcome to Desarrollo Agil</a>
		</div>
		<div class="collapse navbar-collapse" id="myNavbar">
			<ul class="nav navbar-nav navbar-right">
				<li>
					<a href="#" data-toggle="modal" data-target="#signupModal">
						<span class="glyphicon glyphicon-plus-sign"></span> Sign up
					</a>
				</li>
		  		<li>
		  			<a href="#" data-toggle="modal" data-target="#loginModal">
		  				<span class="glyphicon glyphicon-log-in"></span> Login
		  			</a>
		  		</li>
		  </ul>
		  
		  
		</div>
	  </div>
	</nav>
    
	<footer class="container-fluid text-center footer">
	  <p>This website was created by Desarrollo Agil Team.</p>
	</footer>

	<!--Modal-->
	<div id="loginModal" class="modal fade" role="dialog">
		<div class="modal-dialog modal-sm">

		<!-- Modal content-->
		<div class="modal-content">
		  <div class="modal-header">
			<button type="button" class="close" data-dismiss="modal">&times;</button>
			<h4 class="modal-title">Login</h4>
		  </div>
		  <span class="error" id="error_required_login" style="margin-left: 5px;">All field are required</span>
		  <form>
			  <div class="modal-body">
				  <div class="form-group">
					<label for="email">Email address:</label>
					<input type="email" class="form-control" id="email">
					<span class="error" id="error_email_login">Invalid email</span>
                    <span class="error" id="empty_email_login">Required Field</span>
				  </div>
				  <div class="form-group">
					<label for="pwd">Password:</label>
					<input type="password" class="form-control" id="pwd">
					  <span class="error" id="error_password_login">Invalid password</span>
                   <span class="error" id="empty_password_login">Required Field</span>

				  </div>
				  <div class="checkbox">
					<label><input type="checkbox"> Remember me</label>
				  </div>
			  </div>
			  <div class="modal-footer">
				<button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
				<!--ESTO ES PLACEHOLDER, EL LINK NO VA A SERVIR SI NO SE CAMBIA LA DIRECCION-->
				<button type="submit" class="btn btn-success" data-dismiss="modal" onclick="log_in()">Log in</button>
				<!-- TERMINA EL PLACEHOLDER-->
				
			  </div>
		  </form>

		</div>

		</div>
	</div>

	<div id="signupModal" class="modal fade" role="dialog">
		<div class="signup-box modal-dialog modal-sm">

		<!-- Modal content-->
		<div class="modal-content">
		  <div class="modal-header">
			<button type="button" class="close" data-dismiss="modal">&times;</button>
			<h4 class="modal-title">Sign up</h4>
		  </div>
		  <span class="error" id="error_required" style="margin-left: 5px;">All field are required</span>
		  <form>
			  <div class="modal-body">
				  <div class="form-group">
				  	<label for="name_signup">Name:</label>
					<input type="text" class="form-control" id="name_signup" placeholder="Name">
					<span class="error" id="error_name">Invalid name</span>
                  <span class="error" id="empty_name">Required Field</span>
				  </div>
				  <div class="form-group">
				
					<label for="lastname_signup">Lastname:</label>
					<input type="text" class="form-control" id="lastname_signup" placeholder="Lastname">
					  <span class="error" id="error_lastname">Invalid Lastname</span>
                  <span class="error" id="empty_lastname">Required Field</span>
				  </div>
				    <div class="form-group">
				    
					<label for="email_signup">Email:</label>
					<input type="email" class="form-control" id="email_signup" placeholder="Email">
					<span class="error" id="error_email">Invalid email</span>
                    <span class="error" id="empty_email">Required Field</span>
				  </div>
				    <div class="form-group">
				   
					<label for="password_signup">Password:</label>
					<input type="password" class="form-control" id="password_signup" placeholder="Password">
					 <span class="error" id="error_password">Invalid password</span>
                    <span class="error" id="empty_password">Required Field</span>
				  </div>
				   <div class="form-group">
				    <label for="password2_signup">Confirm Password:</label>
					<input type="password" class="form-control" id="password2_signup" placeholder="Confirm Password">
					<span class="error" id="error_password2">Passwords dont match</span>
          			 <span class="error" id="empty_password2">Required Field</span>
				  </div>
				 
	  		  </div>
			  <div class="modal-footer">
				<button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
				<!--ESTO ES PLACEHOLDER, EL LINK NO VA A SERVIR SI NO SE CAMBIA LA DIRECCION-->
				<button type="button"  class="btn btn-success"  onclick="add_user()">Sign up</button>
				<!-- TERMINA EL PLACEHOLDER-->
			</div>
		  </form>
	</div>
	</div>
	</div>
	<script>

	  function add_user() {
	  	
      if(name_signup_valid!=false && lastname_signup_valid!=false && email_signup_valid !=false && password_signup_valid!=false && password2_signup_valid!=false){
       var formData = {
            "name": $('#name_signup').val(),
            "last_name": $('#lastname_signup').val(),
            "password": $("#password_signup").val(),
            "email": $('#email_signup').val()

          };
       
       $.ajax({
            url: "http://trelloagilprueba.esy.es/agiltrello/api/newuser",
            type: 'POST',
            data: JSON.stringify(formData),
            dataType: 'json',
            encode: true
        }).done(function (data) {
        	console.log(data);
			window.location.href="index.html";
        }).fail(function (data) {
            console.log(data);
        });
      }else {
      	 $("#error_required").show();
      console.log("Campos requeridos");
      }
  }
  function log_in() {

    if(email_login_valid !=false && password_login_valid!=false){
    	console.log("Entro");
     var formData = {
          "password": $("#pwd").val(),
          "email": $('#email').val()

        };
      console.log(formData);
     $.ajax({
          url: "http://trelloagilprueba.esy.es/agiltrello/api/getuser",
          type: 'POST',
          data: JSON.stringify(formData),
          dataType: 'json',
          encode: true
      }).done(function (data) {
        console.log(data);
		window.location.href="index.html";
      }).fail(function (data) {
          console.log(data);
      });
    }else {
       $("#error_required_login").show();
    console.log("Campos requeridos");
    }
  }
  
  $('.modal').on('shown.bs.modal', function () {
	$(this).find('input:visible:first').focus();
  })
  </script>

</body>
</html>

